<p>Merhaba arkadaşlar, ROS simülasyon ortamına giriş yapıyoruz. Gerekli kurulumlar ve olası hataların çözümleri aşağıda verilmiştir. Kurs boyunca farklı hatalar ile karşılaşanlar olursa gerekli çözümler buraya eklenerek makale güncellenecektir.</p><h4><strong>sh Kurulumu</strong></h4><p>Makalenin kaynaklar bölümünde bir <strong>.sh dosyası</strong> var. Bu dosyayı çalıştırıp kurulumların hepsini tamamlayalım, yes/no dediği her bölümde yes diyerek onaylayalım. Terminali açıp indirdiğimiz dosyanın dizinine gidip,&nbsp; <strong>sh kurulumlar.sh</strong> dediğimizde kurulumlar yapılacaktır. (Udemy dosyanın ismini değiştiriyorsa örneğin <strong>original.sh</strong> olarak dosya inmişse ( <strong>sh original.sh )</strong></p><h4><strong>mybot_ws</strong></h4><p>Terminalimizi açalım ve <strong>git clone https://github.com/richardw05/mybot_ws </strong>diyelim.</p><p>Ardından aynı terminalde <strong>mybot_ws</strong> dizinimize gidelim . <strong>catkin_make</strong> diyelim ve home dizinimize geri dönelim.</p><p>Daha sonra <strong>gedit ~/.bashrc </strong>diyelim<strong> </strong>ve<strong> </strong>bashrc dosyamıza, <strong>source /home/kullanici_adiniz/mybot_ws/devel/setup.bash</strong> satırını ekleyelim, kaydedip çıkalım.</p><p>Son olarak terminale gelip: <strong>source ~/.bashrc </strong>diyelim ve terminalimizi kapatalım.</p><p>Kursumuzun ilerleyişinde öncelikle <strong>mybot_ws</strong> ardından <strong>turtlebot3</strong> kullanacağız fakat mybot 'u kullanırken bazı durumlarda turtlebot3 paketine ihtiyacımız olacaktır. Bu sebeple şimdiden <strong>turtlebot3 </strong>kurulumunu da yapıyoruz.</p><p><strong><em>NOT:</em></strong><em> Terminal açıp </em><strong><em>whoami</em></strong><em> yazdığınızda size kullanıcı adınızı göstermektedir.</em></p><p><br></p><h4><strong>Turtlebot3 Kurulumu</strong></h4><p>Terminalimizi açalım.</p><p>Ardından,</p><p>ali@ali:~$ <strong>sudo</strong> <strong>apt-get install ros-melodic-turtlebot3-* </strong>diyelim.</p><p>Daha sonra,</p><p>ali@ali:~$ <strong>cd ~/catkin_ws/src/</strong></p><p>ali@ali:~$ <strong>git clone https://github.com/ROBOTIS-GIT/turtlebot3_msgs.git</strong></p><p>ali@ali:~$ <strong>git clone https://github.com/ROBOTIS-GIT/turtlebot3.git</strong></p><p>ali@ali:~$ <strong>git clone https://github.com/ROBOTIS-GIT/turtlebot3_simulations</strong></p><p>ali@ali:~$ <strong>git clone https://github.com/ROBOTIS-GIT/turtlebot3_autorace</strong></p><p>ali@ali:~$ <strong>cd ~/catkin_ws &amp;&amp; catkin_make</strong></p><p>Daha sonra,</p><p>ali@ali:~$ <strong>gedit ~/.bashrc</strong></p><p>Açılan dosyada en alt satıra gelip <strong>export TURTLEBOT3_MODEL=waffle </strong>ekliyoruz. Kaydedip dosyayı kapatalım. Daha sonra terminale gelip: <strong>source ~/.bashrc </strong>diyelim ve terminalimizi kapatalım.</p><p><br></p><p><br></p><h4><strong>Olası Hatalar ve Çözümleri:</strong></h4><p><br></p><ul><li><p><strong>roslaunch mybot_gazebo mybot_world.launch</strong> dediğimizde robotumuz gelmiyor ve <strong>Gazebo [Err] [REST.cc:205] Error in REST request. </strong>hatası alıyorsak:</p></li></ul><p><strong>/usr/share/ignition/fuel_tools</strong> dizininde <strong>config.yaml dosyası </strong>var. Bu dosyaya sağ tıklayıp<strong> VSCode</strong> editörümüzle açalım. <strong>url kısmını https://api.ignitionrobotics.org </strong>olarak değiştirelim. Dosyanın son hali aşağıdaki gibi olacaktır. Ardından kaydetmek istediğimizde VSCode sağ alttan uyarı verecektir. <strong>Retry as Sudo</strong> bildirimini onaylayarak dosyadaki değişikliği kaydedelim. Dosyanın son hali aşağıdaki gibi olacaktır:</p><pre class="prettyprint linenums">---
# The list of servers.
servers:
  -
    name: osrf
    url: https://api.ignitionrobotics.org

  # -
    # name: another_server
    # url: https://myserver

# Where are the assets stored in disk.
# cache:
#   path: /tmp/ignition/fuel</pre><p><br></p><p>Eğer işe yaramaz ise aynı işlemi bir de burada yapalım:</p><p>Ubuntu arayüzünde home dizininde iken sağ üstteki butona tıklayıp seçeneklerden gizli dosyaları göster diyelim.</p><p>.ignition isminde bir klasör göreceğiz. İçine girelim,daha sonra fuel klasörüne girelim ve sonrasında da config.yaml dosyasını açalım.(/home/kullanici_adi/.ignition/fuel/config.yaml&nbsp; Aynı değişiklikleri burada da yapalım.</p><p><strong>Kaynak</strong>: <a href="https://www.youtube.com/watch?v=ftDz_EVoatw" rel="noopener noreferrer" target="_blank">https://www.youtube.com/watch?v=ftDz_EVoatw</a></p><p><br></p><ul><li><p>mybot robotuyla Gazebo'yu açtığımızda, aşağıda yer alan <strong>mavi renkteki lazer görseli</strong> gelmiyorsa:</p></li></ul><figure><img src="https://udemy-images.s3.amazonaws.com:443/redactor/raw/2020-04-14_22-45-43-a80e0a2a8ee65e58ce01ebcff2622b07.png"></figure><p><br></p><p><strong>/mybot_ws/src/mybot_description/urdf </strong>dizininde yer alan <strong>mybot.gazebo</strong> isimli dosyayı açalım.</p><p><br></p><p><strong>89.satırda</strong> yer alan <strong>&lt;visualize&gt;false&lt;/visualize&gt;</strong> kısmını <strong>&lt;visualize&gt;true&lt;/visualize&gt;</strong> olarak değiştirelim.</p><p><br></p><p>Bu işlemi yaptığınız halde hala mavi lazer görüntüsü gelmiyor ise:</p><p>mybot.gazebo içerisinde aşağıdaki değişiklikleri yaparak çözüme ulaşabilirsiniz.</p><p><strong>Değişiklikler:</strong></p><p>&lt;sensor type="ray" name="head_hokuyo_sensor"&gt;</p><p>&lt;plugin name="gazebo_ros_head_hokuyo_controller" filename="libgazebo_ros_laser.so"&gt;</p><p><strong>Eski hali:</strong></p><p>&lt;sensor type="gpu_ray" name="head_hokuyo_sensor"&gt;</p><p>&lt;plugin name="gazebo_ros_head_hokuyo_controller" filename="libgazebo_ros_gpu_laser.so"&gt;</p><p><br></p><p><br></p><ul><li><p><strong>mybot</strong> robotumuzu klavyeden hareket ettirmek için terminalde <strong>roslaunch mybot_navigation mybot_teleop.launch</strong> dediğimizde :</p></li></ul><p><strong>ERROR: cannot launch node of type [turtlebot_teleop/turtlebot_teleop_key]: turtlebot_teleop</strong> hatası alırsak:</p><p><strong>/mybot_ws/src/mybot_navigation/launch</strong> dizininde yer alan <strong>mybot_teleop.launch</strong> isimli dosyayı açalım.</p><p><strong>turtlebot</strong> yazan her yeri <strong>turtlebot3</strong> olarak değiştirelim. Dosyanın son hali aşağıdaki gibi olacaktır.</p><p><br></p><pre class="prettyprint linenums">&lt;?xml version="1.0"?&gt;
&lt;launch&gt;
  &lt;!-- turtlebot_teleop_key already has its own built in velocity smoother --&gt;
  &lt;node pkg="turtlebot3_teleop" type="turtlebot3_teleop_key" name="turtlebot3_teleop_keyboard"  output="screen"&gt;
    &lt;param name="scale_linear" value="0.5" type="double"/&gt;
    &lt;param name="scale_angular" value="1.5" type="double"/&gt;
    &lt;remap from="turtlebot3_teleop_keyboard/cmd_vel" to="cmd_vel"/&gt;
  &lt;/node&gt;
&lt;/launch&gt;</pre><p><br></p><h4><strong>Öneri:</strong></h4><p>Gazebo ile ilgili yukarıda verilen problemler dışında başka problemler çıkıyorsa, mesela Gazebo'yu açıp kapadıktan sonra tekrar girdiğinizde hata veriyorsa veya tekrar gazeboyu açmak istediğinizde hiç açılmıyorsa, gazebo bazen kitlenebiliyor ekranda donuk kalabiliyor, [gazebo-1] process has died [pid 8432, exit code 255 hatası vs. örnekler verilebilir. Bunları önlemek için:</p><p>Terminale gelip <strong>gedit ~/.bashrc</strong> diyelim. Daha sonra bashrc dosyamıza şu satırı ekleyelim.</p><p><strong>alias killgazebo="killall -9 gazebo &amp; killall -9 gzserver&nbsp; &amp; killall -9 gzclient"</strong></p><p>Kaydedip çıkalım. </p><p>Gazebo'yu direk açmadan önce veya herhangi bir launch dosyasıyla Gazebo'yu açmadan önce,</p><p><strong>killgazebo</strong> komutunu kullanmayı alışkanlık haline getirirsek sorunlar yüksek ihtimal ortadan kalkacaktır.</p>